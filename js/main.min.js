$(document).ready(function(){$.fn.scrollStopped=function(i){var e=$(this),a=this;e.scroll(function(){e.data("scrollTimeout")&&clearTimeout(e.data("scrollTimeout")),e.data("scrollTimeout",setTimeout(i,250,a))})},_now=Date.now||function(){return(new Date).getTime()},_throttle=function(i,e,a){var t,o,n,s=null,l=0;a||(a={});var r=function(){l=a.leading===!1?0:_now(),s=null,n=i.apply(t,o),s||(t=o=null)};return function(){var c=_now();l||a.leading!==!1||(l=c);var u=e-(c-l);return t=this,o=arguments,0>=u||u>e?(clearTimeout(s),s=null,l=c,n=i.apply(t,o),s||(t=o=null)):s||a.trailing===!1||(s=setTimeout(r,u)),n}};var i=["-webkit-","-moz-","-ms-","-o-",""],e=function(e,a){$.each(i,function(i,t){e.css(t+"transform","scale3d("+a+", "+a+", 1)")})},a=function(e,a){$.each(i,function(i,t){e.css(t+"transform","translate3d(0, "+a+", 0)")})},t=function(e,a,t){$.each(i,function(i,o){e.css(o+"transform","translateX("+a+") scale3d("+t+", "+t+", 1)")})},o=function(i){history.pushState?history.pushState(null,null,i):location.hash=i},n=function(i){$("#menu-items li").removeClass("pure-menu-selected"),$(i).addClass("pure-menu-selected")},s=$("#image-grid"),l=$(".all-categories");$("#menu-items li").click(function(){var i=$(this);n(i);var e=i.attr("id"),a="#"+e.substr("menu-item-".length,e.length);o(a),"menu-item-portfolio"===e&&($(".filter-options .active").removeClass("active"),l.addClass("active"),s.shuffle("shuffle","all"))});var r=window.location.hash;""!==r&&(r=r.substr(1,r.length),n($("#menu-item-"+r)));var c=$("nav");c.localScroll({duration:600});var u=$(window),d=!1,f=window.AnimationFrame;f.shim();var h,m=$(document).height(),v=$("#about-me"),p=$("#sticky-header"),g=$("#doodle"),C=$("#doodle-image"),b=g.height(),w=$("#cloud-left"),k=$("#cloud-right"),y=$(window).height(),T=m-y,_=function(i){if(d){var e=1+(i-b)/b;if(e=+e.toFixed(4),S(e),p.length>0&&v.length>0){var a=c.height()+p.height(),t=v.offset().top,o=s.offset().top;i+a>t?(p.hasClass("no-transition")&&p.removeClass("no-transition"),p.hasClass("hidden")||p.addClass("hidden")):(p.hasClass("hidden")&&p.removeClass("hidden"),o>i+a&&(p.hasClass("no-transition")||p.addClass("no-transition")),x(e))}I(i),f(function(){_(i)}),d=!1}},S=function(i){if(!(i>1)){var a=1-i;a=0>a?0:a,e(C,a),t(w,100*-i+"%",a),t(k,100*i+"%",a)}},x=function(i){if(0>i)return void p.hide();p.show();var e=100*i;e=e>100?100:e,e>0?c.removeClass("nav-shadow"):c.addClass("nav-shadow"),a(p,e+"%")},z=$("#contact-speaker"),D=$("#moving-colibri"),F=["icon-colibri","icon-colibri-d","icon-colibri","icon-colibri-h"],q=F.length,A=0,I=function(i){i>=T?z.removeClass("icon-speaker-l").addClass("icon-speaker-s"):z.removeClass("icon-speaker-s").addClass("icon-speaker-l"),D.removeClass("icon-colibri icon-colibri-d icon-colibri-h").addClass(F[A]),A++,A=A>=q?0:A},M=function(){D.removeClass("icon-colibri icon-colibri-d icon-colibri-h").addClass("icon-colibri")},O=($("body"),function(){d=!0,h=u.scrollTop(),_(h)});Modernizr.mq("screen and (min-width:523px)")&&(u.scroll(_throttle(O,60)),O(),u.scrollStopped(function(){M()}));var P=function(){var i=$("#shuffle_sizer");s.shuffle({itemSelector:".image-block",sizer:i})},W=$(".filter-options"),X=function(){var i=W.children();i.on("click",function(){var i=$(this),e=i.data("group"),a="all"===e,t=i.hasClass("active"),o="all";a?($(".filter-options .active").removeClass("active"),i.addClass("active")):(o=t?"all":i.data("group"),t?l.addClass("active"):$(".filter-options .active").removeClass("active"),i.toggleClass("active")),s.shuffle("shuffle",o),$(window).scrollTo("#portfolio",{duration:600})}),i=null},j=function(){var i=_throttle(function(){s.shuffle("update")},300);s.find("img").each(function(){var e;this.complete&&void 0!==this.naturalWidth||(e=new Image,$(e).on("load",function(){$(this).off("load"),i()}),e.src=this.src)}),setTimeout(function(){i()},500)},B=function(){P(),X(),j()};B(),$(".thumbnail").unveil(200,function(){var i=$(this);i.load(function(){i.addClass("thumbnail-box-shadow").addClass("gray-filter").attr("width","100%").attr("height","100%"),i.next().css("display","block")})});var E=function(){s.each(function(){$(this).magnificPopup({delegate:".filtered a",type:"image",gallery:{enabled:!0},retina:{ratio:2},preload:[2,2],removalDelay:500,callbacks:{beforeOpen:function(){var i=this;i.st.image.markup=i.st.image.markup.replace("mfp-figure","mfp-figure mfp-with-anim"),i.st.mainClass=i.st.el.attr("data-effect")}}})})};E(),$("#contact").hover(function(){z.removeClass("icon-speaker-l").addClass("icon-speaker-s")},function(){z.removeClass("icon-speaker-s").addClass("icon-speaker-l")})});